- hosts: dell
  gather_facts: no
  become: true
  user: arthur
  tasks:
    - name: Add MariaDB Repo
      ansible.builtin.yum_repository:
        name: MariaDB
        description: MariaDB YUM repo
        baseurl: https://rpm.mariadb.org/10.10/fedora/$releasever/$basearch
        gpgkey: https://rpm.mariadb.org/RPM-GPG-KEY-MariaDB
    - name: Add Google Chrome Repo
      ansible.builtin.yum_repository:
        name: google-chrome
        description: Google Chrome YUM repo
        baseurl: https://dl.google.com/linux/chrome/rpm/stable/x86_64
        gpgkey: https://dl.google.com/linux/linux_signing_key.pub
    - name: Add VSCodium Repo
      ansible.builtin.yum_repository:
        name: vscodium
        description: vscodium YUM repo
        baseurl: https://download.vscodium.com/rpms/
        gpgkey: https://gitlab.com/paulcarroty/vscodium-deb-rpm-repo/-/raw/master/pub.gpg
    - name: Add Google Cloud SDK Repo
      ansible.builtin.yum_repository:
        name: gCloud
        description: Google Cloud SDK
        baseurl: https://packages.cloud.google.com/yum/repos/cloud-sdk-el8-x86_64
        gpgkey: https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg
    - name: Install RPM Fusion Free
      ansible.builtin.yum:
        name: https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-stable.noarch.rpm
        state: present
        disable_gpg_check: false
    - name: Upgrade all yum packages
      yum:
        name: "*"
        state: latest
    - name: install core packages
      yum:
        state: latest
        name:
          - openssh-server
          - speedtest-cli
          - gnome-screenshot
          - gnome-tweaks
          - thunderbird
          - sshpass
          - htop
          - nvtop
          - pv
          - jq
          - rsync
          - gparted
          - smartmontools
          - google-chrome
          - nextcloud-client
          #- caffeine
    - name: install development tools
      yum:
        state: latest
        name:
          - git
          - gh
          - ansible
          - make
          - gcc
          - g++
          - gcc-c++
          - python3-pip
          - nodejs-typescript
          - cockpit
          - MariaDB-client
          - gdb
          - adb
          - podman
          - buildah
          - skopeo
          - npm
          - tree
          - kubernetes-client
          - google-cloud-cli
          - codium
    - name: Download YQ
      get_url:
        url: https://github.com/mikefarah/yq/releases/latest/download/yq_linux_amd64
        dest: /usr/local/bin/yq
        mode: a+x
    - name: Download ArgoCD Vault Plugin
      get_url:
        url: https://github.com/argoproj-labs/argocd-vault-plugin/releases/download/v1.16.1/argocd-vault-plugin_1.16.1_linux_amd64
        dest: /usr/local/bin/argocd-vault-plugin
        mode: a+x
    - name: install additional packages
      yum:
        state: latest
        name:
          - vlc
          - gimp
          - cura
          - obs-studio
          - openscad
          - handbrake
          - ffmpeg
          #- network-manager-openvpn
          #- network-manager-openvpn-gnome
    - name: Install ProtonTricks
      pip:
        name: protontricks
    - name: Install psutil
      pip:
        name: psutil
    - name: Remove UnNeeded Packages
      yum:
        state: absent
        name:
          - geary
          - docker.io
          - docker-compose
    - name: Download Minio Client
      get_url:
        url: https://dl.min.io/client/mc/release/linux-amd64/mc
        dest: /usr/local/bin/mc
        mode: a+x
    - name: Download golang
      get_url:
        url: https://go.dev/dl/go1.21.3.linux-amd64.tar.gz
        dest: /tmp/go.linux-amd64.tar.gz

    - name: Extract golang
      unarchive:
        src: /tmp/go.linux-amd64.tar.gz
        dest: /usr/local
        remote_src: yes

    - name: Install Webex
      ansible.builtin.yum:
        name: https://binaries.webex.com/WebexDesktop-CentOS-Official-Package/Webex.rpm
        state: present
