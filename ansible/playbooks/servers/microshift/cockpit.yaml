---
- name: Install and configure Cockpit on Microshift nodes
  hosts: microshift
  gather_facts: false
  become: true
  user: arthur
  tasks:
    - name: Install Cockpit
      ansible.builtin.dnf:
        state: present
        name:
          # renovate: datasource=repology depName=centos_stream_9/cockpit
          - cockpit-287-1.el9
          # renovate: datasource=repology depName=centos_stream_9/cockpit-pcp
          - cockpit-pcp-287-1.el9

    - name: Cockpit Web Gui Devices
      ansible.builtin.copy:
        src: "../../../../machineConfigs/servers/server/etc/cockpit/machines.d/99-webui.json"
        dest: "/etc/cockpit/machines.d/99-webui.json"
        mode: "0644"
