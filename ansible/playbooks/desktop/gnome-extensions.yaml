---
- name: Configure GNOME extensions
  hosts: ryzen
  gather_facts: false
  user: arthur
  tasks:
    - name: Install Extensions
      become: true
      ansible.builtin.dnf:
        state: present
        name:
          # renovate: datasource=repology depName=fedora_43/dconf-editor
          - dconf-editor #-45.0.1-3.fc40
          # renovate: datasource=repology depName=fedora_43/gnome-shell-extension-gsconnect
          - gnome-shell-extension-gsconnect #-56-1.fc40
          # - gnome-shell-extension-autohidetopbar
          # - gnome-shell-extension-netspeed
          # - gnome-shell-extension-places-menu
          # - gnome-shell-extension-transparentnotification

    - name: Enable Extensions
      community.general.dconf:
        key: "/org/gnome/shell/enabled-extensions"
        value:
          "['netspeed@hedayaty.gmail.com', 'places-menu@gnome-shell-extensions.gcampax.github.com', 'gsconnect@andyholmes.github.io', \
          'transparentnotification@ipaq3870', 'hidetopbar@mathieu.bidon.ca', 'pop-shell@system76.com', 'caffeine@patapon.info', \
          'appindicatorsupport@rgcjonas.gmail.com', 'apps-menu@gnome-shell-extensions.gcampax.github.com']"
    - name: Nautilus Show Image Thumbnails
      community.general.dconf:
        key: "/org/gnome/nautilus/preferences/show-image-thumbnails"
        value: "'always'"
    - name: Nautilus Bookmarks
      ansible.builtin.copy:
        src: "../../../machineConfigs/desktop/home/arthur/.config/gtk-3.0/bookmarks"
        dest: "/home/arthur/.config/gtk-3.0/bookmarks"
        mode: "0644"

    - name: Dash to Dock Cycle Windows
      community.general.dconf:
        key: "/org/gnome/shell/extensions/dash-to-dock/click-action"
        value: "'cycle-windows'"

    - name: Dock Auto Hide
      community.general.dconf:
        key: "/org/gnome/shell/extensions/dash-to-dock/manualhide"
        value: "false"

    - name: Dock Fixed
      community.general.dconf:
        key: "/org/gnome/shell/extensions/dash-to-dock/dock-fixed"
        value: "false"

    - name: Dock Max Icon Size
      community.general.dconf:
        key: "/org/gnome/shell/extensions/dash-to-dock/dash-max-icon-size"
        value: "36"

    - name: Dock Multi Monitor
      community.general.dconf:
        key: "/org/gnome/shell/extensions/dash-to-dock/multi-monitor"
        value: "true"

    - name: Dock Show Mounts
      community.general.dconf:
        key: "/org/gnome/shell/extensions/dash-to-dock/show-mounts"
        value: "false"

    - name: Dock Extend Height
      community.general.dconf:
        key: "/org/gnome/shell/extensions/dash-to-dock/extend-height"
        value: "false"

    - name: Dock Position
      community.general.dconf:
        key: "/org/gnome/shell/extensions/dash-to-dock/dock-position"
        value: "'BOTTOM'"

    - name: Show Volumes on Desktop
      community.general.dconf:
        key: "/org/gnome/shell/extensions/ding/show-volumes"
        value: "false"

    - name: Show Trash on Desktop
      community.general.dconf:
        key: "/org/gnome/shell/extensions/ding/show-trash"
        value: "false"

    - name: Show Home on Desktop
      community.general.dconf:
        key: "/org/gnome/shell/extensions/ding/show-home"
        value: "false"

    - name: Pop Cosmic Overlay Key Action
      community.general.dconf:
        key: "/org/gnome/shell/extensions/pop-cosmic/overlay-key-action"
        value: "'WORKSPACES'"

    - name: Pop Cosmic Show Applications Button
      community.general.dconf:
        key: "/org/gnome/shell/extensions/pop-cosmic/show-applications-button"
        value: "true"

    - name: Pop Shell Gap Inner
      community.general.dconf:
        key: "/org/gnome/shell/extensions/pop-shell/gap-inner"
        value: "uint32 0"

    - name: Pop Shell Gap Outer
      community.general.dconf:
        key: "/org/gnome/shell/extensions/pop-shell/gap-outer"
        value: "uint32 0"

    - name: Pop Shell Hint Color
      community.general.dconf:
        key: "/org/gnome/shell/extensions/pop-shell/hint-color-rgba"
        value: "'rgb(0,0,0)'"

    - name: Pop Shell Show Title
      community.general.dconf:
        key: "/org/gnome/shell/extensions/pop-shell/show-title"
        value: "true"

    - name: Pop Shell Tile
      community.general.dconf:
        key: "/org/gnome/shell/extensions/pop-shell/tile-by-default"
        value: "false"
