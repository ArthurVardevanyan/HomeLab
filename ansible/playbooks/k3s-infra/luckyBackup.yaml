- hosts: k3s_infra
  gather_facts: no
  become: true
  user: arthur
  tasks:
    - name: install luckyBackup
      apt:
        state: latest
        name:
          - luckybackup
    - name: Create luckyBackup Folder
      file:
        path: /root/.luckyBackup
        state: directory
    - name: Create Profile Folder
      file:
        path: /root/.luckyBackup/profiles
        state: directory
    - name: Create Schedule Folder
      file:
        path: /root/.luckyBackup/schedule
        state: directory
    - name: Create luckyBackup Settings
      copy:
        src: "../../../machineConfigs/k3s-infra/root/.luckyBackup/settings.ini"
        dest: "/root/.luckyBackup/settings.ini"
    - name: Create luckyBackup Profile
      copy:
        src: "../../../machineConfigs/k3s-infra/root/.luckyBackup/profiles/default.profile"
        dest: "/root/.luckyBackup/profiles/default.profile"
    - name: Create luckyBackup Schedule
      copy:
        src: "../../../machineConfigs/k3s-infra/root/.luckyBackup/schedule/schedule.dat"
        dest: "/root/.luckyBackup/schedule/schedule.dat"
