---
kind: KubeDescheduler
apiVersion: operator.openshift.io/v1
metadata:
  name: cluster
  namespace: openshift-kube-descheduler-operator
  annotations:
    annotations:
    argocd.argoproj.io/sync-wave: "2"
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
spec:
  profileCustomizations:
    devEnableEvictionsInBackground: true
    # devLowNodeUtilizationThresholds: High
    devDeviationThresholds: AsymmetricLow
    namespaces:
      excluded:
        - rook-ceph
        - github-arc-runners
        - arthurvardevanyan-ci
        - analytics-for-spotify-ci
        - finance-tracker-ci
        - homelab
        - okd-virt
        - renovate
  deschedulingIntervalSeconds: 60  # 7200
  managementState: Managed
  mode: Automatic
  profiles:
    - KubeVirtRelieveAndMigrate
  # evictionLimits:
  #   node: 1
  #   total: 3
