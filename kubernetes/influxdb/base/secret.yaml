# apiVersion: v1
# kind: Secret
# metadata:
#   name: influxdb-creds
#   namespace: influxdb
#   labels:
#     app: influxdb
#     app.kubernetes.io/instance: influxdb
# type: Opaque
# stringData:
#   INFLUXDB_ADMIN_USER: <path:secret/data/homelab/influxdb#INFLUXDB_ADMIN_PASSWORD>
#   INFLUXDB_ADMIN_PASSWORD: <path:secret/data/homelab/influxdb#INFLUXDB_ADMIN_USER>
# ---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: influxdb-creds
  namespace: influxdb
spec:
  refreshInterval: "1h"
  secretStoreRef:
    name: vault
    kind: ClusterSecretStore
  target:
    name: influxdb-creds
    #creationPolicy: "Merge"
  data:
    - secretKey: INFLUXDB_ADMIN_USER
      remoteRef:
        key: homelab/influxdb
        property: INFLUXDB_ADMIN_PASSWORD
    - secretKey: INFLUXDB_ADMIN_USER
      remoteRef:
        key: homelab/influxdb
        property: INFLUXDB_ADMIN_PASSWORD
